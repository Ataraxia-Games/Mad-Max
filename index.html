<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mad Max Card Game</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="game-container">
        <!-- Game Header -->
        <div class="game-header">
            <div class="game-info">
                <div class="phase-info">Фаза: <span id="current-phase">SETUP</span></div>
                <div class="round-info">Раунд: <span id="current-round">1</span></div>
                <div class="current-player">Игрок: <span id="current-player-name">-</span></div>
            </div>
        </div>

        <!-- Main Game Area -->
        <div class="game-area">
            <div id="game-board" class="game-board"></div>
        </div>

        <!-- Player Pool -->
        <div class="player-pool">
            <div class="deck-area draw-pile" data-count="0">
                <div class="deck-label">Колода</div>
                <div class="deck-count">0</div>
            </div>
            <div class="hand-container"></div>
            <div class="deck-area discard-pile" data-count="0">
                <div class="deck-label">Сброс</div>
                <div class="deck-count">0</div>
            </div>
        </div>

        <!-- End Turn Button -->
        <button id="end-turn-btn" class="end-turn-btn" style="display: none;">Завершить ход</button>
    </div>

    <script src="js/card.js"></script>
    <script src="js/board.js"></script>
    <script src="js/player.js"></script>
    <script src="js/game.js"></script>
    <script src="js/main.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const game = new Game();
        
        // Обработчик выбора карты
        document.addEventListener('click', (e) => {
            const cardElement = e.target.closest('.card');
            if (cardElement && game.phase === 'PLAYER_TURN') {
                // Убираем выделение с предыдущей выбранной карты
                document.querySelectorAll('.hand-container .card.selected').forEach(card => {
                    card.classList.remove('selected');
                });
                
                const cardId = parseInt(cardElement.dataset.cardId);
                const currentPlayer = game.players[game.currentPlayerIndex];
                if (!currentPlayer) {
                    console.log('No current player');
                    return;
                }
                const card = currentPlayer.hand.find(c => c.id === cardId);
                if (card) {
                    console.log('Selected card:', card);
                    cardElement.classList.add('selected');
                    game.selectCard(card);
                } else {
                    console.log('Card not found in player hand');
                }
            }
        });

        // Обработчик выбора позиции
        document.addEventListener('click', (e) => {
            const slotElement = e.target.closest('.player-slot');
            if (slotElement && game.phase === 'PLAYER_TURN') {
                const position = parseInt(slotElement.dataset.position);
                game.selectPosition(position);
            }
        });

        // Обработчик кнопки End Turn
        document.getElementById('end-turn-btn').addEventListener('click', () => {
            game.endTurn();
        });
    });
    </script>
</body>
</html> 